/*
 * Full _nightSky.css
 * Defines the dark blue gradient background, styles for SVG star particles,
 * and the drifting night clouds.
 */

/*
 * Container for the SVG star particles, clouds, and night sky gradient.
 * This element is rendered in ThemedBackground.jsx when theme === 'dark'.
 */
.svg-star-background {
  position: absolute; /* Occupy the full space of its parent */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none; /* Ensure background doesn't interfere with mouse events */
  overflow: hidden; /* Prevent scrollbars */

  /* The dark blue gradient for the night sky */
  background: linear-gradient(
    180deg,
    #0a0a20 0%,
    #1a1a4a 50%,
    #2a2a7a 100%
  );
  background-size: 100% 100%;
}

/* * --- MOON GLOW (Optional Atmosphere) --- 
 * Adds a subtle radial glow to the top-left corner
 */
.svg-star-background::before {
  content: "";
  position: absolute;
  top: -100px;
  left: -100px;
  width: 500px;
  height: 500px;
  background: radial-gradient(circle, rgba(60, 80, 120, 0.2) 0%, transparent 70%);
  filter: blur(50px);
  z-index: 2; /* Sits above stars but below clouds/UI */
  pointer-events: none;
}

/*
 * --- STAR PARTICLES ---
 */

/* Star Animation: Pop in, oscillate, then fade out */
@keyframes pop-oscillate-fade {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0) rotateZ(0deg);
  }
  10% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.1) rotateZ(var(--random-rotation, 0deg));
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotateZ(var(--random-rotation, 0deg));
  }
  40% {
    transform: translate(-50%, -50%) scale(1) translateY(-10px) rotateZ(var(--random-rotation, 0deg));
  }
  60% {
    transform: translate(-50%, -50%) scale(1) translateY(10px) rotateZ(var(--random-rotation, 0deg));
  }
  80% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(0.5) rotateZ(calc(var(--random-rotation, 0deg) * 1.5));
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0) rotateZ(calc(var(--random-rotation, 0deg) * 2));
  }
}

/* Styling for individual SVG star particles */
.svg-star-background .star-particle-svg {
  position: absolute;
  transform: translate(-50%, -50%);
  /* Size is set dynamically via inline styles in React */
  
  /* NEW: Add bloom effect matching the star color (#ffd885) */
  /* We use two shadows: a tight, bright one for intensity, and a wider one for the glow */
  filter: drop-shadow(0 0 2px rgba(255, 216, 133, 0.9)) drop-shadow(0 0 8px rgba(255, 216, 133, 0.6));
  
  /* Optional: Hint to browser for performance optimization */
  will-change: transform, opacity;
}


/*
 * --- NIGHT CLOUDS ---
 * Drifting, semi-transparent clouds for the dark theme.
 */

.night-cloud-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: 3; /* Above stars and moon glow */
  pointer-events: none;
}

/* Base Cloud Shape using CSS shadows to create "fluff" */
.night-cloud {
  position: absolute;
  background: transparent;
  width: 200px;
  height: 60px;
  border-radius: 200px;
  opacity: 0.15; /* Very subtle opacity */
  
  /* The "Cloud" shape is created by casting multiple shadows from the main div */
  box-shadow: 
    0 0 40px 10px rgba(180, 200, 220, 0.4),  /* Moonlight Glow */
    60px -30px 50px 15px rgba(180, 200, 220, 0.4),
    120px 10px 60px 15px rgba(180, 200, 220, 0.4);
    
  /* Filter to blur it further for a wispy look */
  filter: blur(20px); 
}

/* Specific Cloud Instances & Animations */

.night-cloud-1 {
  top: 15%;
  left: -20%;
  transform: scale(1.5);
  animation: driftNight 120s linear infinite;
}

.night-cloud-2 {
  top: 40%;
  left: -20%;
  transform: scale(1.2);
  animation: driftNight 180s linear infinite;
  animation-delay: -50s; /* Start halfway through animation */
  opacity: 0.1; /* Even fainter */
}

.night-cloud-3 {
  top: 70%;
  left: -20%;
  transform: scale(1.8);
  animation: driftNight 150s linear infinite;
  animation-delay: -20s;
}

/* Cloud Animation Keyframes */
@keyframes driftNight {
  0% {
    left: -30%;
    opacity: 0;
  }
  10% {
    opacity: 0.15; /* Fade in */
  }
  90% {
    opacity: 0.15;
  }
  100% {
    left: 110%; /* Move completely off screen */
    opacity: 0;
  }
}

/* Responsive adjustments */
@media (max-width: 768px) {
  /* Optional: Adjust cloud size or count for mobile */
  .night-cloud {
    opacity: 0.1; /* Reduce opacity on smaller screens to avoid clutter */
    transform: scale(0.8);
  }
}